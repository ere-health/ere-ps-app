#!/usr/bin/make -f
DEB_PACKAGE = ere-health
DEB_VERSION = 1.0.0

%:
	dh $@

override_dh_auto_build:
	/home/manuel/apache-maven-3.9.5/bin/mvn -f ../${DEB_PACKAGE}_${DEB_VERSION} install

override_dh_auto_install:
	# Installieren Sie das gebaute Paket
	mkdir -p $(CURDIR)/debian/${DEB_PACKAGE}/opt/${DEB_PACKAGE}
	mkdir -p $(CURDIR)/debian/${DEB_PACKAGE}/opt/${DEB_PACKAGE}/config
	cp -r ../${DEB_PACKAGE}_${DEB_VERSION}/target/quarkus-app/* $(CURDIR)/debian/${DEB_PACKAGE}/opt/${DEB_PACKAGE}/
	cp ../${DEB_PACKAGE}_${DEB_VERSION}/jmx_prometheus_javaagent-1.0.1.jar $(CURDIR)/debian/${DEB_PACKAGE}/opt/${DEB_PACKAGE}/
	cp ../${DEB_PACKAGE}_${DEB_VERSION}/src/main/resources/application.properties $(CURDIR)/debian/${DEB_PACKAGE}/opt/${DEB_PACKAGE}/config
	cp ../${DEB_PACKAGE}_${DEB_VERSION}/src/main/resources/prometheus.yaml $(CURDIR)/debian/${DEB_PACKAGE}/opt/${DEB_PACKAGE}/
	cp -r ../${DEB_PACKAGE}_${DEB_VERSION}/prometheus $(CURDIR)/debian/${DEB_PACKAGE}/opt/${DEB_PACKAGE}/prometheus/
	cp ../${DEB_PACKAGE}_${DEB_VERSION}/run.sh $(CURDIR)/debian/${DEB_PACKAGE}/opt/${DEB_PACKAGE}/
